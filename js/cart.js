function val_email(t){return!!t.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)}$(document).ready(function(){console.log("Cart Loaded!");try{parent.daddy_u_there()}catch(t){return void location.replace("/404.html")}global_total=0,global_eligible=!1,global_trackid="0",global_dmd_total=0,fetch_items_by_id(),$("select").on("change",function(){fetch_items_from_cart(!0),fetch_items_by_id(!0,!0),$(".sub_total_text").text("Sub Total: ₹"+global_total),$("#eligibility_text_2").html(""),2e3<=global_total&&(global_eligible=!0,$("#eligibility_text_2").html("<br>POD Unavailable for orders above 1999")),550<global_total-global_dmd_total?(global_eligible=!0,$(".eligibility_text").html("Your Order is <b>Eligible</b> for <b>Free Home Delivery</b>")):300<=global_total&&global_total<=550||550<global_total?(global_eligible=!0,$(".eligibility_text").html("Your Order is <b>Eligible</b> for Home Delivery")):(global_eligible=!1,$(".eligibility_text").html("Your Order is <b>Not Eligible</b> for Home Delivery"))}),scroll_view("main_header_scroll_id"),console.log("removed scroll"),$(window).off("scroll")}),fetch_items_by_id=(s=!1,m=!1)=>{let l=localStorage.getItem("cart");if(null==l)return console.log("cart empty"),itemXCount=[],$(".empty_cart").show(),$("#sub_total_text_btn").prop("disabled",!0),$(".cart_header_conatiner").hide(),void $(".sub_total_conatiner").hide();$(".empty_cart").hide(),$("#sub_total_text_btn").prop("disabled",!1),$(".cart_header_conatiner").show(),$(".sub_total_conatiner").show(),l=l.split("--");for(var o=[],h=[],i=0;i<l.length;i++){let t=l[i];t=t.split("x"),o.push(t[0]),h.push(t[1])}$(".invoice_table td").remove(),$(".rmv_me").remove();var v=0;$.ajaxSetup({async:!1});for(var u=global_dmd_total=0;u<o.length;u++)""!=o[u]&&$.post("/validate.php",{fetch_items_by_id:o[u]},function(t,e){var l=t.split("--");if(!(l.length<=1)){$(".place_order_btn_cart").show(),$(window).width()<=500&&($(".place_order_btn_cart").hide(),console.log("Width < hiding btn"));for(var o=l.length/7,i=0;i<o;i++){var a=l[0+7*i];let t=l[1+7*i];var _=l[2+7*i],r=l[3+7*i],n=l[4+7*i],d=l[5+7*i],c=h[u],p=l[6+7*i];v+=parseInt(n)*h[u],"Cigarettes"==r&&(global_dmd_total+=parseInt(n)*h[u]),0==s&&0==m?item_injector(a,t,_,r,n,d,c,p):1==s&&0==m&&(t=t+" "+p,invoice_item_injector(a,t,_,r,n,d,c))}}});$.ajaxSetup({async:!0}),global_total=v,0!=global_total&&"0"!=global_total||(itemXCount=[],$(".empty_cart").show(),$("#sub_total_text_btn").prop("disabled",!0),$(".cart_header_conatiner").hide(),$(".sub_total_conatiner").hide()),$(".sub_total_text").text("Sub Total: ₹"+global_total),$("#eligibility_text_2").html(""),2e3<=global_total&&(global_eligible=!0,$("#eligibility_text_2").html("<br>POD Unavailable for orders above 1999")),550<global_total-global_dmd_total?(global_eligible=!0,$(".eligibility_text").html("Your Order is <b>Eligible</b> for <b>Free Home Delivery</b>")):300<=global_total&&global_total<=550||550<global_total?(global_eligible=!0,$(".eligibility_text").html("Your Order is <b>Eligible</b> for Home Delivery")):(global_eligible=!1,$(".eligibility_text").html("Your Order is <b>Not Eligible</b> for Home Delivery")),1!=m&&1==s&&invoice_item_injector(a="",b="",c="",d="",e="",f="",g="",v)},item_injector=(t,e,l,o,i,a,_,r="")=>{var n=t+"_cart_inp";client_item_holder='<td ><img src="'+a+'" alt="'+e+'"></td><td id="'+(t+"_cart_td")+' " class="all_in_one_td">'+(e+" "+r+"<br>"+l+" - "+o+"<br>₹"+i),client_item_holder+='<br><label class="td_txt_2">QTY&nbsp</label><select id="'+n+'"><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option> </select>',client_item_holder+='<label class="td_txt_3" id="'+(t+"_cart_del")+'" onclick="delete_item_cart(this)">&nbsp| Delete item</label></td>',y=$("<tr></tr>"),y.append(client_item_holder),$(".cart_table").append(y),$("#"+n).val(_)},gen_invoice=()=>{0!=global_eligible?($(".blocker").fadeIn(500),$(".invoice").fadeIn(500),fetch_items_from_cart()):msg_box("Minimum Order is ₹300")},fetch_items_from_cart=(t=!1)=>{var e,l=0,o="";$(".cart_table tr td").each(function(){var t=$(this).find("select").val();null!=t&&(l=t);t=$(this).attr("id");null!=t&&(e=t.split("_")[0],o+=e+"x"+l+"--")}),o=o.slice(0,-2),localStorage.removeItem("cart"),localStorage.setItem("cart",o),console.log("new local: "+localStorage.getItem("cart")),0==t&&fetch_items_by_id(!0)},invoice_item_injector=(t,e,l,o,i,a,_,r="")=>{""!=r&&(e="<b>Total</b>",i="<b>"+r+"</b>");""!=r&&(t=550<parseInt(global_total)-parseInt(global_dmd_total)?"0":(300<=global_total&&global_total,"40"),i=parseInt(r)+parseInt(t),client_item_holder="<td><b>Delivery Charge</b></td><td>"+_+"</td><td>"+o+"</td><td>"+t+"</td>",y=$('<tr class="rmv_me"></tr>'),y.append(client_item_holder),$(".invoice_table").append(y),client_item_holder="<td><b>Permit Charge</b></td><td>"+_+"</td><td>"+o+"</td><td>5</td>",i="<b>"+(i=parseInt(i)+parseInt("5"))+"</b>",y=$('<tr class="rmv_me"></tr>'),y.append(client_item_holder),$(".invoice_table").append(y)),client_item_holder="<td>"+e+"</td>",client_item_holder+="<td>"+_+"</td><td>"+o+"</td><td>"+i+"</td>",y=$('<tr class="rmv_me"></tr>'),y.append(client_item_holder),$(".invoice_table").append(y)},close_invoice=()=>{$(".blocker").fadeOut(500),$(".invoice").fadeOut(300),$(".invoice td").remove()},close_otp=()=>{$(".blocker").fadeOut(500),$(".otp_box").fadeOut(500)},delete_item_cart=t=>{var e="#"+t.id;t=(t=(t=t.id).split("_"))[0],old_cart_storage=localStorage.getItem("cart"),old_cart_storage=old_cart_storage.split("--");for(var l="",o=0;o<old_cart_storage.length;o++){var i=old_cart_storage[o];(i=(i=i.split("x"))[0])==t||(l=l+old_cart_storage[o]+"--")}l=l.slice(0,-2),localStorage.removeItem("cart"),localStorage.setItem("cart",l),console.log(localStorage.getItem("cart")),chk_ss(),$(e).parent().parent().fadeOut(600),setTimeout(function(){switch_pg("cart")},600);let a=localStorage.getItem("cart");a=a.split("--"),console.log("Empty chk:"+a+" length:"+a.length),a.length<=0&&(console.log("cart empty"),itemXCount=[],$(".empty_cart").show(),$("#sub_total_text_btn").prop("disabled",!0),$(".cart_header_conatiner").hide(),$(".sub_total_conatiner").hide())},reset=()=>{$(".invoice").hide(),$(".blocker").fadeOut(500)},gen_otp=()=>{$("#contact_ip1_hidden_text").hide(),$("#contact_ip2_hidden_text").hide();let t=new Date;var e;t=t.getTime(),0!=val_email($("#invoice_ip_2").val())?(e=$("#invoice_ip_1").val(),$.post("/validate.php",{timestamp:t,genotp:e},function(t,e){data_new=t.split("--"),"user_not_logged_in"==t?(show_login(),global_auto_genotp=!0):"ph_already_verified"==t?place_order():"ph_already_registered"==t?($("#contact_ip1_hidden_text").fadeIn(300),$("#invoice_ip_1").val("")):"otp_spaming_blocked"==t?(reset(),msg_box("Your have exceeded the maximim daily limit of OTP verification, retry after some time...")):"otp_send_success"==data_new[0]&&($(".invoice").hide(),$(".otp_box").show(),track_id=data_new[1],console.log("Got Trackid: "+track_id))})):$("#contact_ip2_hidden_text").show()},send_otp=()=>{$("#otp_box_hidden_text").hide(300);let t=new Date;t=t.getTime();var e=$("#otp_resp_ip").val();if(console.log("length of otp:"+e.length),7!=e.length)return $("#otp_box_hidden_text").fadeIn(300),void $("#otp_resp_ip").val("");$.post("/validate.php",{timestamp:t,track_id:track_id,respotp:e},function(t,e){"otp_verify_success"==t?($(".otp_box").hide(),$("#otp_resp_ip").val(""),$("#invoice_ip_1").prop("disabled",!0),place_order()):"otp_incorrect_err"==t?($("#otp_box_hidden_text").fadeIn(300),$("#otp_resp_ip").val("")):"otp_expired_err"==t&&(msg_box("Otp expired try again in some time"),$(".otp_box").hide(),$(".blocker").hide())})},place_order=()=>{if($("#contact_ip2_hidden_text").hide(),0!=val_email($("#invoice_ip_2").val())){let t=new Date;t=t.getTime();var e=(e=localStorage.getItem("cart")).replace(new RegExp("--","g"),"^^"),l=$("#invoice_ip_0").val(),o=$("#invoice_ip_1").val(),i=$("#invoice_ip_2").val(),a=$("#invoice_ip_3").val();10==o.length?$.post("/validate.php",{timestamp:t,items:e,total:global_total,d:l,a:o,b:i,place_order:a},function(t,e){"user_not_logged_in"==t?show_login():"order_que_sucess"==t?($("#invoice_ip_1").val(""),$("#invoice_ip_2").val(""),$("#invoice_ip_3").val(""),close_invoice(),msg_box("Your Order has been placed Successfully!!!"),$("#invoice_ip_1").prop("disabled",!1),localStorage.removeItem("cart"),switch_pg("cart")):console.log("Unk err")}):alert("Invalid Contact Length")}else $("#contact_ip2_hidden_text").show()};
